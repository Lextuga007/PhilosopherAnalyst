[
  {
    "path": "posts/2021-02-05-creating-sample-datetime-data-in-r/",
    "title": "Creating sample datetime data in R",
    "description": "How to produce a reproducible example (reprex) for datetime",
    "author": [
      {
        "name": "Zoë Turner",
        "url": {}
      }
    ],
    "date": "2021-02-05",
    "categories": [
      "Reprex in R"
    ],
    "contents": "\r\n\r\n\r\n\r\nFigure 1: Frosty leaves\r\n\r\n\r\n\r\nThe product of my drifting mind\r\nI was writing a blog for my team’s blog about working in the open and midway I drifted into writing code. For some reason I had a burning desire to highlight a common issue in SQL with the use of BETWEEN for dates and then ended up spending working out how to create fake date/time data in R.\r\nReading through my team blog I realised it didn’t make sense to have the R data creation code in it so I’ve promoted it to its own blog - this! The SQL thing with BETWEEN will also get its own blog in due course.\r\nReproducible examples\r\nI like producing reprexes1 and I have a few gists where I’ve answered some questions from places like Stackoverflow and R Studio Community by first creating reprexes. These were questions which were removed, unfortunately, before I had a chance to send the reply. One time I had an answer, with a reprex, in just 20 minutes and was about to post, but it had been deleted! I wasn’t prepared to lose that code so I posted it in my own GitHub gist and I’ve used the reprex code many times since.\r\nReproducing what?\r\nI was trying to recreate the SQL date time format YYYY-MM-DD hh:mm:ss[.nnn] that I have in my work’s data warehouse. For this example I’ve only reproduced a random sample in the SmallDateTime YYYY-MM-DD hh:mm:ss format.\r\nLosing the code\r\nI spent a long time trying to work out how to randomly sample the constituent parts of a date time (including hours, minutes and seconds), even using base R code and the chron package to get hm (but not s)2.\r\nBy the end of the day I was very tired and I did a terrible thing: I cut the code from an Untitled and unsaved file, moved to another R project and then copied something else. I didn’t stop there. Oh no, I then copied and pasted several things then, when I finally went to paste what I’d cut originally it was, of course, gone.\r\n\r\n\r\n\r\nWindows history clipboard\r\nTurns out Windows 10 has a clipboard history but you have to switch it on by going to Windows settings/Clipboard settings and switch on history.\r\nI looked for a GIPHY for “nice to know” but none conveyed the right level of sarcasm for that phrase.\r\nEvery cloud has a silver lining and all that…\r\nFrantically re-writing code after deleting huge swathes means that you do get an opportunity to improve the code. At least, that’s what I told myself. And so I re-wrote what I could remember and realised I’d missed the seconds and also how I’d not even checked the {lubridate} package which does indeed produce sequential dates and time which can be sampled:\r\n\r\n\r\nlibrary(lubridate)\r\n\r\nlubridate_dhms <- data.frame(\r\n  hms = sample(seq(ymd_hms(\"2020-1-1 0:00:00\"), ymd_hms(\"2021-1-1 0:00:00\"), \r\n                    by = \"hour\"), 15)\r\n)\r\n\r\n\r\n\r\nBut the by = \"\" only accepts hour, not minute or second so those are all 00:00.\r\nHelp!!!!\r\nBy this point I was a bit fed up so I did what all good coders who have exploited the internet for help do - I asked my NHS-R Community colleagues on Slack:\r\n\r\nIs there any way to generate random hours, minutes and seconds for made-up data?\r\n\r\nAnd I included examples of what I’d attempted.\r\nThus ensued a great thread with my boss, Chris Beeley, who answered the question within minutes.\r\n\r\n\r\nbase_r_dhms <- data.frame(\r\n  sample(seq(as.POSIXlt(\"2020-10-01\"),\r\n      as.POSIXlt(\"2020-10-10\"), by = 1), 15)\r\n)\r\n\r\n\r\n\r\nI asked what the by = 1 means and Chris confirmed this was a 1 second interval so the seq(…) creates the sequence at 1 seconds and then the sample() takes, in this case, 15 data points from this sequence.\r\nIt’s also possible to write “s” or “sec” in place of the 1:\r\n\r\n\r\nbase_r_dhms_same <- data.frame(\r\n  sample(seq(as.POSIXlt(\"2020-10-01\"),\r\n      as.POSIXlt(\"2020-10-10\"), by = \"s\"), 15)\r\n)\r\n\r\n# or\r\n\r\nbase_r_dhms_same <- data.frame(\r\n  sample(seq(as.POSIXlt(\"2020-10-01\"),\r\n      as.POSIXlt(\"2020-10-10\"), by = \"sec\"), 15)\r\n)\r\n\r\n\r\n\r\nBecause I’d also asked about {lubridate} generating random minutes and seconds, and Chris was having too much fun with this he answered that too:\r\n\r\n\r\n# using the code I shared that generates random dates and hours\r\n\r\nhour_min_sec <- data.frame(\r\n  hms = seq(ymd_hms(\"2020-1-1 0:00:00\"), ymd_hms(\"2021-1-1 0:00:00\"), \r\n                    by = \"hour\")\r\n)\r\n\r\n# updating the data frame with random seconds and updating the data\r\nlubridate::second(hour_min_sec$hms) <- sample(0 : 59, nrow(hour_min_sec), replace = TRUE)\r\n\r\n# updating the data frame with random minutes and updating the data\r\nlubridate::minute(hour_min_sec$hms) <- sample(0 : 59, nrow(hour_min_sec), replace = TRUE)\r\n\r\n\r\n\r\nHappy ending\r\nIn response to my saying:\r\n\r\nYou won’t believe how long I’ve been working on this and how many lines of code I have written!\r\n\r\nChris said:\r\n\r\nI bet you learned a lot though\r\n\r\nAnd it’s true.\r\n\r\nReproducible example or data that has been copied or made up to help explain a problem in data↩︎\r\nI used this blog http://datacornering.com/how-to-generate-time-intervals-or-date-sequence-in-r/↩︎\r\n",
    "preview": "posts/2021-02-05-creating-sample-datetime-data-in-r/img/leaves-frost.png",
    "last_modified": "2021-02-05T19:11:48+00:00",
    "input_file": {},
    "preview_width": 2997,
    "preview_height": 3808
  },
  {
    "path": "posts/2021-01-31-adding-disqus-to-distill-blogs/",
    "title": "Adding Disqus to distill blogs",
    "description": "Notes on adding comments to distill pages.",
    "author": [
      {
        "name": "Zoë Turner",
        "url": {}
      }
    ],
    "date": "2021-01-31",
    "categories": [
      "Distill"
    ],
    "contents": "\r\n\r\n\r\n\r\nFigure 1: Photo of frost on wood\r\n\r\n\r\n\r\nInspiration\r\nWhen searching for “distill blog doesn’t show xaringan slides” I stumbled across this blog by Shamindra Shrotriya where I found that it’s possible to add comments to the distill pages.\r\nIssues with images\r\nI’ve never used Disqus before but I followed Shamindra’s blog instructions and it worked. The only thing to note is that images must be in PNG format. Thankfully I’d only included a few so I could convert them by opening them in Microsoft Paint and saving them as .PNG.\r\nI saved as .PNG rather than .png as @tomjemmett had had to set my files to this in the NHS-R Community GitHub to get the xaringan slides there to render. I thought it best to follow this as good practice.\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-01-31-adding-disqus-to-distill-blogs/img/frost-on-wood.png",
    "last_modified": "2021-01-31T22:33:16+00:00",
    "input_file": {},
    "preview_width": 4000,
    "preview_height": 3000
  },
  {
    "path": "posts/2021-01-15-data-ethics/",
    "title": "Data Ethics",
    "description": "Philosophers are experts in their field",
    "author": [
      {
        "name": "Zoë Turner",
        "url": {}
      }
    ],
    "date": "2021-01-15",
    "categories": [
      "Philosophy",
      "Ethics"
    ],
    "contents": "\r\n\r\n\r\n\r\nFigure 1: Photo of holly\r\n\r\n\r\n\r\n20 years after I graduated, I returned to my university to see how things had changed. The buildings hadn’t changed but it was a different world inside, and none more striking than the most imposing building on the campus; the library. Now this is a library with some history as it is was at Hull University where Philip Larkin worked as the head librarian and whilst I still have a soft spot for Hull, Philip Larkin wasn’t so enamoured. He wrote:\r\n\r\n“I’m settling down in Hull all right. Every day I sink a little further.”\r\n\r\nThe library building is the most imposing building on the campus, grey and tall, but it has a fabulous view from the top floor. I’d spent a bit of time in the library, mainly around the not-actually-that-dusty philosophy books although I did once venture into a section that had books that touched on the occult.1\r\nIt was breathtaking how modern everything was inside Brynmor Jones library. Whilst the exterior hadn’t changed, there was now a glass fronted lift and comfortable seating areas and plenty of plug points you’d find in any respectable coffee shop. Gone, though, were the banks of computers necessary in my day as so few people owned one. There were a few computers dotted about but these were only to access the library catalogue. Shockingly, some areas, like Computer Science, had fewer books than I expected, I’m guessing, because so much can be accessed electronically.\r\nInevitably, I drifted to the philosophy section and, to my delight, I was greeted with rows upon rows of books. The first journal I picked up was a lucky find as it contained an article called: Why flatulence is funny and what was even better was that my little one was just at the right age to find the first paragraph utterly hilarious. We giggled loudly, disturbing the studious atmosphere. For your delectation here is the extract:\r\n\r\nToot. Pass gas. Break wind. Cut the cheese. Float an air biscuit. Burp from behind. Blow the brown horn. The backfire, bant, bucksnort, booty bomb, colon cologne, drifter, fanny bubble, gasser, gurgler, moon beam, nether belch, pants puffer, pooh tune, rip-snort, sphincter whistle, thunder dumpling, tush tickler, and trouser cough. These are synonyms for a bodily function that is as natural as breathing, eating, or sleeping. Yet unlike other physiological functions, the ‘flatus’ is a source of endless humor – perhaps more so than any other subject in human experience. But why are farts funny? That is a question that is both serious and philosophically interesting.\r\n\r\nPhilosophy is not a dusty old subject, although it’s often expected to be just that that. It’s a subject that has existed in its own right, as well as integrated into other subjects like religion and science, or with economics and psychology. I even had a lecturer who had studied maths and philosophy which, at the time, I thought was a strange combination. I realise now that philosophy is part of every subject in one way or another and makes sense to be combined with maths because of the overlap of logical and critical thinking.\r\nIndeed, philosophers like Bertrand Russell, who inspired me to choose philosophy after I read some of his work2, was also a fine mathematician. Along with Alfred North Whitehead, another mathematician, they wrote 360 pages to prove definitively that 1 + 1 = 23 in “Principia Mathematica”.\r\nDifferent ways of thinking\r\nI was lucky with my degree in that it was heavily weighted to the final year, so I was able to take modules in other courses without much fear of affecting my final degree class. I studied in 3 subject areas, history, physics and religion.\r\nThe history module went badly as I quickly realised; I don’t think like a historian. I had been trained in philosophy so I questioned the question, didn’t questioned the ‘facts’ and, I don’t know, just constantly posed questions which didn’t go down too well.\r\nThe second subject was a physics module designed to get the scientists to think about their place in society. I absolutely aced it because I was used to writing essays and it was wholly philosophical in its approach.\r\nThe final module was in religious studies and I had a lecturer who respected philosophy deeply and thought of himself as a philosopher. The essay question was also very close to my final dissertation (about morality) so I, sort of, plagiarised myself, if that’s technically possible.\r\nI’m not certain, but I do wonder if those two successful essays, the physics and the religious studies, would have been graded lower by my philosophy lecturers because, whilst the lecturers were rigorous in their marking, I did exceptionally well in them compared to my usual results.\r\nWhat was so interesting at that time, and which I appreciated very quickly given my poor mark in the history module, was that we fundamentally thought differently. It’s something that intrigues me even today as I can see how medics think differently to patients, analysts think differently to commissioners, and managers think differently to juniors.\r\nNew subject areas\r\nArguing is pretty fundamental to philosophy but it’s the way you argue that matters. There is a structure to it and an approach to subjects that is core to all areas of philosophy. But still, specialisms have changed.\r\nIn my day I was offered the chance to study metaphysics and ethics and I chose ethics but, in those early days of the internet and computing, there was never any talk (at least in my lectures) of data ethics. This is clearly a growing subject area with big data and Artificial Intelligence, so much so that the UK Government Digital Service even have a Data Ethics Team who, this month, have run a workshop to explore the skills a data ethicist should have.\r\nComplementing this they released a short survey for data ethics professionals (all sectors) aimed at identifying these skills. I was surprised that the first question, whilst comprehensively detailed, lacked a point blank tick box for philosophy and it is bundled in with other social science subjects:\r\n\r\nAccording to you, which of the following skills are the most important in data/AI ethics? Choose up to six. *\r\nAbility to quickly read and interpret complex documents from a range of sources and distill to what is relevant\r\nKnowledge of/ background in social science (anthropology, economics, sociology, philosophy etc)\r\nProblem-solving skills\r\nExperience translating technical information for a non-technical audience, and vice versa\r\nDomain knowledge of existing schools of thought and exemplar models of data ethics in practice\r\nCommunication skills\r\nData modelling, data cleansing, and data enrichment skills\r\nData literacy\r\nProject management skills\r\nNetworking and engagement skills; working collaboratively across multidisciplinary teams and stakeholder from data science and other areas (policy, social science)\r\nProven IT and mathematical skills\r\nBroad policy analysis and evaluation experience\r\nAbility to draw together, analyse, and critically evaluate information\r\nSound judgement on relevant information, stakeholders, and value-driven activities\r\nApplied maths, statistics, and scientific practices\r\nLogical and creative thinking skills\r\nUnderstanding analysis across the product life cycle\r\nQuality assurance, validation and data linkage abilities\r\nData engineering and manipulation\r\nOther:\r\n\r\nI liked some of these points as they look like they are breaking down what philosophical thought demands but none really felt like what I learned in my degree. Yes, I learned to quickly read and interpret complex documents from a range of sources and distill to what is relevant but I used the skills listed in the Times Higher Education to be able to do it:\r\n\r\nThe skills learned on a philosophy degree, including clear and analytical thinking, persuasive writing and speaking, innovative questioning and effective reasoning, give a solid foundation for entering the workforce and are beneficial in careers that require problem-solving and assessing information from various angles.\r\n\r\nBalancing domain knowledge with skill\r\nWorking in analysis, I see this quite often, where people are analytical thinkers combining their domain4 knowledge with analysis. The same with philosophy. After all, it’s a subject that everyone can do to some extent. But what is worrying is when those that specialise in those fields, the analysts and the philosophers, get sidelined because people forget that they are experts in their respective fields.\r\nMany people can get to grips with the intricacies of law, particularly when it affects them, but they are not trained lawyers and if you needed legal representation you would still go to the lawyer or solicitor. If you are working with statistics it’s a good idea to include a statistician or data scientist and if you need mental health support, you go to a clinical psychologist and not someone who has read a lot about psychology. But how many ethics committees or data ethics group actually include an ethicist or even something akin to a ‘professional philosopher’? Is it more important to have domain knowledge and just practice the philosophy or should it be the other way around?\r\nI don’t really have the answer but my inclination, having studied this subject, is that you need a practising ethicist. Someone steeped in the subject both within specialisms and who is aware and up to date with general philosophical principles. It’s worth remembering that philosophy is not a series of facts to learn and regurgitate; it’s a way of thinking. It demands that you are both a deep thinker and also ask naive questions - of yourself and of others. You need to be curious and comfortable with uncertainty. Not the quantifiable uncertainty that statistics offers, but the uncertainty you get when you can see both sides of the story (or many sides of the story as is often the case). Philosophy is a discipline that should not be overlooked as an entity in its own right, even though it’s one of the few subjects that combines so imperceptibly with others.\r\nI’d be interested to know and talk to any professional applied ethicists or any ethics committees with ethicists. My contact details can be found here.\r\n\r\nI had searched for the Devil of Loudon by Aldous Huxley but didn’t take it out and, to this day, still haven’t read it.↩︎\r\nI had read about how a table is predominately made up of space as the molecules are not that dense. Consequently, how can we say a table is really there and why don’t we just walk straight through walls?↩︎\r\nThis really puts into perspective the weakness of the twitter hate directed at @kareem_carr when he wrote a thread on interpreting 2 + 2 = 5. The issue was that this particular equation appeared in George Orwell’s book, 1984, and so was seen from the perspective of thought control and dismissing fundamental mathematics. The ‘arguments’ though were often, I felt, an excuse for abuse but Kareem’s good humoured and levelled responses transcended the vitriol.↩︎\r\nBy domain I mean subject area, so working in healthcare, my data knowledge is around the NHS and its structures.↩︎\r\n",
    "preview": "posts/2021-01-15-data-ethics/img/holly.PNG",
    "last_modified": "2021-01-31T21:52:19+00:00",
    "input_file": {},
    "preview_width": 3968,
    "preview_height": 1984
  },
  {
    "path": "posts/2020-12-19-publishing-xaringan-slides/",
    "title": "Publishing xaringan slides",
    "description": "Notes on how I published my NHS-R Conference lightning talk",
    "author": [
      {
        "name": "Zoë Turner",
        "url": {}
      }
    ],
    "date": "2020-12-19",
    "categories": [
      "Xaringan",
      "GitHub"
    ],
    "contents": "\r\n\r\n\r\n\r\nFigure 1: Chafffinch at bird tables\r\n\r\n\r\n\r\nPublishing xaringan slides\r\nThis is my first attempt to publish my NHS-R Community 2020 Virtual Conference Lightning talk slides using the code shared by Dr. Silvia Canelón who ran the workshop Sharing Your Work with xaringan. I’m indebted to Silvia’s workshop and also to the code she used to publish the workshop slides.\r\n\r\n\r\n\r\nUnfortunately, it looks like they render better on the index.Rmd file and not on an article. The slides look the same (with lost formats and no interactivity) whether the link is to the self-contained html in a repository on my computer or to the url.\r\n\r\n\r\n\r\nfitvids('.shareagain', {players: 'iframe'});\r\n\r\nThis RStudio Community conversation helped me realise this is probably something in distill and not something I was doing. In particular, it’s where @Apreshill says:\r\n\r\nBut also, this is the index.Rmd, not a post, so not entirely sure. I also added this line to my _site.yml, but confess to not testing whether that is required or not for this to work:\r\n\r\nI tried adding the line include: [“slides/”] @Apreshill refers to but that didn’t solve the formatting.\r\nWhy do I need to learn R when I can use SQL?  time: 1:05:07\r\nThings to note when publishing using GitHub\r\nTo get started there are lots of blogs on publishing to GitHub pages but this from R Studio/distill creators is also very clear.\r\nThe following are notes I’ve made and learned around publishing html and xaringan slides to GitHub.\r\nPublishing subfolders\r\nAlthough I managed to publish a GitHub repository following the instructions, I remained frustratingly confused about how to publish the html slides in subfolders. It turned out it was a simple thing that no one mentioned; you just need to add the subfolder directory to the url!\r\nFor example, @tomjemmett had published the NHS-R Community repository https://github.com/nhs-r-community/Conference_2020 and the url becomes: https://nhs-r-community.github.io/Conference_2020/\r\nTo see my xaringan slides I needed to get the page to the subfolder /Lightning_talks/ZoëTurner_SQLvR/ and this only needs to be added to the url like so:  https://nhs-r-community.github.io/Conference_2020/Lightning_talks/Zo%C3%ABTurner_SQLvR/index.html#1\r\nThe #1 at the end of the url refers to the slide number so you can go straight to a particular slide if you want.\r\nIt took me days of looking at websites on how to publish GitHub pages to realise this small thing and the danger of continued searching was that some pages referred to the old way of publishing GitHub pages which necessitated creating a new branch called gh-pages.\r\nThankfully, after days of puzzling over this I decided to take a copy (fork) of Silvia’s repository and run her code, which worked perfectly, so I knew I was on the right lines. Comparing the urls to the slides and where she she had saved them in her repository, I noticed the file paths were the same and then it all clicked for me. The point to all this is that it’s a generous thing to open up your code to such naive scrutiny and I am forever grateful to those that do.\r\nThings to note\r\nI have a special character in my name: Zoë. The ë appears like that in the url but when copied and pasted here, for example, it comes out as Zo%C3%AB. Thankfully, both work, which is good to know if you have an unusual character in your name!\r\nBe patient\r\nI quite often got a 404 error page just after saving a file to publish which was odd as everything worked ok. This was because it can take quite a few minutes for things to refresh.\r\nXaringan slides are blank\r\nAlso note that if the xaringan slides don’t appear but there is a blank box in the top left hand side of the screen and with a slider, it has worked. This can occur if you work on a VPN, as I do, where the security is very tight.\r\nI also noticed the same box when I knitted xaringan slides and I was using a link to a video. The particular slide would only work when the slides were opened in the Chrome browser. Given that the NHS often default to Explorer or Edge browsers, it might also be worth checking you are using Chrome if you are not on a VPN and still get the blank slider box.\r\nXaringan slides are not self-contained\r\nUnlike using html, the xaringan slides need to have the images, CSS and libraries available to run it. I made the mistake of using two folders for my images but it worked out that I used /img for the slide backgrounds and the /images for the pictures related only to that presentation.\r\nUpdate…\r\nSilvia kindly shared the update about making the xaringan presentations ‘self-contained’. I’d used that line of code for this blog originally as I hadn’t read the instructions and had wondered if that was why the slide navigation was missing (see the answer to that below!). Testing how ‘self-contained’ self-contained is I emailed myself just the html and got the text but no formats. Zipping together the html along with the css, img and libs (my names for these) folders did mean the html opened up ok with all the formatting. It’s a little like when saving a webpage and a same-named folder appears that is needed for the html to open.\r\nReasons not to use pdfs\r\nUsing pdfs gets around the need to email out supporting files and folders as it’s just one file to send, however, I’m reluctant to use pdfs because of accessibility as much as aesthetics:\r\nhttps://www.gov.uk/guidance/publishing-accessible-documents\r\n\r\nThink about format\r\nDoing this will help your document support as many users as possible and can future-proof your information.\r\nPublish in HTML format wherever possible so that your documents use your users’ custom browser settings. It can be difficult to make other formats easier to read.\r\nFor example, PDF documents:\r\ncan make your content harder to find, use and maintain do not work well with assistive technologies like screen readers a lot of the time. If your documents do not meet accessibility standards you could be breaking the Equality Act 2010.\r\n\r\nAesthetically, you lose interactivity (dygraphs or plotly charts) or movement in your slides (videos or GIFs) with pdfs so if you look through the commits in my Presentation repository you will see me flicking between html to pdf and back to html as I’ve tried this out.\r\nMissing slide navigation\r\nI was puzzled for a long time why I had published my slides in this blog but the slide navigation was missing. As I consistently fail to read instructions it turned out I needed the line:\r\n\r\n\r\nxaringanExtra::use_share_again()\r\n\r\n\r\n\r\nin the presentation slide code. I put this in the code chunk related to libraries (often listed as r libs).\r\nBecause I missed doing this from the beginning there were a few steps I needed to to to get this to publish on the blog. These were:\r\nPresentation repo\r\nAdd the line of code to the presentation code\r\nKnit the presentation\r\nCommit and push the presentation rmd and html file\r\nBlog repo\r\nKnit the blog post\r\nBuild the website\r\nCommit and push all changes\r\nDo a little celebration jig and thank Silvia yet again for helping me out as she let me know this missing line of code in the NHS-R Community Slack Group\r\n\r\n\r\n\r\n",
    "preview": "posts/2020-12-19-publishing-xaringan-slides/distill-preview.png",
    "last_modified": "2021-01-31T21:45:22+00:00",
    "input_file": {},
    "preview_width": 453,
    "preview_height": 551
  }
]
